"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.coverageLogger = coverageLogger;
const promises_1 = require("fs/promises");
const path_1 = require("path");
const consts_1 = require("./consts");
function coverageLogger(obj) {
    return new Proxy(obj, {
        get(target, prop) {
            const originalMethod = target[prop];
            if (typeof originalMethod === 'function') {
                return async function (...args) {
                    const logCoverage = (0, promises_1.writeFile)((0, path_1.join)(consts_1.coverageDir, prop), `${JSON.stringify({ name: prop, inputParams: args })},`, { flag: 'a' });
                    const gqlResponse = await originalMethod.apply(target, args);
                    await logCoverage;
                    return gqlResponse;
                };
            }
            return originalMethod;
        },
    });
}
